<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa de Londres - Puntos de InterÃ©s</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-map-marked-alt"></i> London Visit </h1>
        <p>Visita del 19/12/2025 al 22/12/2025 by Maider and Lucia</p>
    </div>

    <div class="container">
        <div class="sidebar">
            <h2><i class="fas fa-star"></i> Puntos de InterÃ©s</h2>
            
            <div class="poi-item">
                <span onclick="focusOnMarker(10)">
                    <h3><i class="fas fa-bed"></i> Stay at Safestay London Elephant & Castle</h3>
                    <p>Alojamiento econÃ³mico y moderno en el corazÃ³n de Londres, ideal para viajeros jÃ³venes.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="0">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="poi-item">
                <span onclick="focusOnMarker(0)">
                    <h3><i class="fas fa-crown"></i> Palacio de Buckingham</h3>
                    <p>Residencia oficial de la monarquÃ­a britÃ¡nica. No te pierdes el cambio de guardia.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="1">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(1)">
                    <h3><i class="fas fa-clock"></i> Big Ben y el Parlamento</h3>
                    <p>El icÃ³nico reloj de Londres y sede del gobierno britÃ¡nico.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="2">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="poi-item">
                <span onclick="focusOnMarker(2)">
                    <h3><i class="fas fa-place-of-worship"></i> Torre de Londres</h3>
                    <p>Fortaleza histÃ³rica y prisiÃ³n real, hogar de las joyas de la corona.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="3">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(3)">
                    <h3><i class="fas fa-bridge"></i> Tower Bridge</h3>
                    <p>Puente levadizo mÃ¡s famoso del mundo con vistas espectaculares.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="4">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="poi-item">
                <span onclick="focusOnMarker(4)">
                    <h3><i class="fas fa-museum"></i> Museo BritÃ¡nico</h3>
                    <p>Tesoros de la historia mundial, incluyendo los restos de la antigua Grecia y Egipto.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="5">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(11)">
                    <h3><i class="fas fa-tree"></i> Natural History Museum</h3>
                    <p>Museo dedicado a la historia natural, famoso por su colecciÃ³n de dinosaurios.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="11">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(5)">
                    <h3><i class="fas fa-shopping-bag"></i> Harrods</h3>
                    <p>El centro comercial mÃ¡s lujoso de Londres, una experiencia Ãºnica.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="6">
                    <span class="slider"></span>
                </label>
                </div>
            <div class="poi-item">
                <span onclick="focusOnMarker(6)">
                    <h3><i class="fas fa-theater-masks"></i> Shakespeare's Globe</h3>
                    <p>Teatro reconstruido al estilo original de la Ã©poca isabelina.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="7">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(7)">
                    <h3><i class="fas fa-eye"></i> London Eye</h3>
                    <p>Noria gigante con vistas panorÃ¡micas de 360Â° de toda la ciudad.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="8">
                    <span class="slider"></span>
                </label>
                </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(8)">
                    <h3><i class="fas fa-cathedral"></i> Catedral de San Pablo</h3>
                    <p>Obra maestra de la arquitectura barroca con su cÃºpula icÃ³nica.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="9">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="poi-item">
                <span onclick="focusOnMarker(9)">
                    <h3><i class="fas fa-water"></i> Camden Lock</h3>
                    <p>Canal histÃ³rico con mercado alternativo y vibrante escena musical.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="10">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="food-item">
                <span onclick="focusOnFoodMarker(0)">
                    <h3><i class="fas fa-utensils"></i> Camden Market</h3>
                    <p>Variedad de puestos de comida internacional y opciones veganas.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="100">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="food-item">
                <span onclick="focusOnFoodMarker(1)">
                    <h3><i class="fas fa-hamburger"></i> Kung Fu Burger</h3>
                    <p>Hamburguesas con opciones vegetarianas y veganas cerca de la Torre de Londres.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="101">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="food-item">
                <span onclick="focusOnFoodMarker(2)">
                    <h3><i class="fas fa-drumstick-bite"></i> JI chicken shop</h3>
                    <p>Pollo frito estilo coreano con opciones vegetarianas en London Bridge.</p>
                </span>
                <label class="toggle-xmas">
                    <input type="checkbox" class="check" data-index="102">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Inicializar el mapa centrado en Londres
        const map = L.map('map').setView([51.5074, -0.1278], 12);

        const christmasIcon = L.divIcon({
            html: '<div style="background: #e63946; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 10px rgba(230, 57, 70, 0.5);"><i class="fas fa-gift"></i></div>',
            className: 'custom-marker',
            iconSize: [30, 30]
        });
        // AÃ±adir capa de tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Puntos de interÃ©s con informaciÃ³n detallada
        const pointsOfInterest = [
            {
                name: "Palacio de Buckingham",
                coords: [51.5014, -0.1419],
                description: "La residencia oficial de la monarquÃ­a britÃ¡nica en Londres. Construido en 1703, ha sido el hogar de los reyes y reinas desde 1837.",
                info: "ğŸ« Entrada: Â£30 | â° Mejor hora: 10:30 AM | ğŸš‡ EstaciÃ³n: Victoria"
            },
            {
                name: "Big Ben y el Parlamento",
                coords: [51.5007, -0.1246],
                description: "El reloj mÃ¡s famoso del mundo y sede del Parlamento britÃ¡nico. El nombre 'Big Ben' se refiere en realidad a la campana del reloj.",
                info: "ğŸ“¸ Fotos: Mejor desde Westminster Bridge | ğŸš‡ EstaciÃ³n: Westminster"
            },
            {
                name: "Torre de Londres",
                coords: [51.5081, -0.0759],
                description: "Fortaleza histÃ³rica fundada por Guillermo el Conquistador en 1066. Hogar de las joyas de la corona y famosa prisiÃ³n real.",
                info: "ğŸ« Entrada: Â£29.90 | â° DuraciÃ³n tour: 3 horas | ğŸš‡ EstaciÃ³n: Tower Hill"
            },
            {
                name: "Tower Bridge",
                coords: [51.5055, -0.0754],
                description: "Puente levadizo construido entre 1886 y 1894. Uno de los sÃ­mbolos mÃ¡s reconocibles de Londres.",
                info: "ğŸ« Exhibition: Â£12.30 | ğŸš‡ EstaciÃ³n: Tower Hill | ğŸ“¸ Mejores fotos: South Bank"
            },
            {
                name: "Museo BritÃ¡nico",
                coords: [51.5194, -0.1270],
                description: "Museo de historia y cultura con mÃ¡s de 8 millones de objetos. Hogar de la Piedra Rosetta y otros tesoros mundiales.",
                info: "ğŸ« Gratis | â° 10:00 - 17:00 | ğŸš‡ EstaciÃ³n: Tottenham Court Road"
            },
            {
                name: "Harrods",
                coords: [51.4994, -0.1634],
                description: "Centro comercial de lujo fundado en 1834. Conocido por su decoraciÃ³n navideÃ±a y su secciÃ³n de alimentos.",
                info: "ğŸ›ï¸ Abierto: 10:00 - 21:00 | ğŸš‡ EstaciÃ³n: Knightsbridge | ğŸ’³ Dress code smart casual"
            },
            {
                name: "Shakespeare's Globe",
                coords: [51.5081, -0.0972],
                description: "Teatro reconstruido al estilo isabelino donde se representan obras de Shakespeare como en su Ã©poca.",
                info: "ğŸ« Tours: Â£17 | ğŸ­ Obras: Â£5-Â£45 | ğŸš‡ EstaciÃ³n: London Bridge"
            },
            {
                name: "London Eye",
                coords: [51.5033, -0.1196],
                description: "Noria gigante de 135 metros de altura con 32 cÃ¡psulas. Vista panorÃ¡mica de 360Â° de Londres.",
                info: "ğŸ« Entrada: Â£31 | â° DuraciÃ³n: 30 min | ğŸš‡ EstaciÃ³n: Waterloo"
            },
            {
                name: "Catedral de San Pablo",
                coords: [51.5138, -0.0983],
                description: "Catedral anglicana diseÃ±ada por Sir Christopher Wren. Famosa por su cÃºpula y su Whispering Gallery.",
                info: "ğŸ« Entrada: Â£20 | â° 8:30 - 16:00 | ğŸš‡ EstaciÃ³n: St. Paul's"
            },
            {
                name: "Camden Lock",
                coords: [51.5390, -0.1426],
                description: "Mercado alternativo junto al canal Regent's Canal. Conocido por su mÃºsica en vivo y ambiente bohemio.",
                info: "ğŸ« Gratis | ğŸ” Street Food | ğŸš‡ EstaciÃ³n: Camden Town"
            },
            {
                name: "Stay at Safestay London Elephant & Castle",
                coords: [51.4945, -0.1003],
                description: "Alojamiento econÃ³mico y moderno en el corazÃ³n de Londres, ideal para viajeros jÃ³venes.",
                info: "ğŸ’° Precio por noche: Desde Â£25 | ğŸš‡ EstaciÃ³n: Elephant & Castle"
            },
            {
                name: "Natural History Museum",
                coords: [51.4967, -0.1764],
                description: "Museo dedicado a la historia natural, famoso por su colecciÃ³n de dinosaurios y su arquitectura impresionante.",
                info: "ğŸ« Gratis | â° 10:00 - 17:30 | ğŸš‡ EstaciÃ³n: South Kensington"
            }
        ];

        const eatingPlaces = [
            {
                name: "Camden Market",
                coords: [51.5416, -0.1420],
                description: "Mercado vibrante con una gran variedad de puestos de comida internacional y opciones veganas.",
                info: "ğŸ´ Opciones veganas disponibles | â° Abierto 10:00 - 18:00 | ğŸš‡ EstaciÃ³n: Camden Town"
            },
            {
                name: "Kung Fu Burger",
                coords: [51.5120, -0.0905],
                description: "Restaurante de hamburguesas con opciones vegetarianas y veganas, ubicado cerca de la Torre de Londres.",
                info: "Precios: Â£5-Â£10 | ğŸ” Opciones veganas disponibles | â° Abierto 12:00 - 22:00 | ğŸš‡ EstaciÃ³n: Tower Hill"
            },
            {
                name: "JI chicken shop",
                coords: [51.5155, -0.0722],
                description: "Famoso por su pollo frito estilo coreano, con opciones vegetarianianas.",
                info: "Precios: Â£7-Â£12 | ğŸ— Opciones vegetarianas disponibles | â° Abierto 12:00 - 22:00 | ğŸš‡ EstaciÃ³n: London Bridge"
            }
        ];

        let markers = [];
        let foodMarkers = [];
        const markerNormalIcon = L.divIcon({
            html: '<div style="background: #667eea; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);"><i class="fas fa-map-marker-alt"></i></div>',
            className: 'custom-marker',
            iconSize: [30, 30]
        });

        // AÃ±adir marcadores al mapa
        pointsOfInterest.forEach((poi, index) => {
            const marker = L.marker(poi.coords, { icon: markerNormalIcon }).addTo(map);
            
            const popupContent = `
                <div class="popup-title">${poi.name}</div>
                <div class="popup-description">${poi.description}</div>
                <div class="popup-info">${poi.info}</div>
            `;
            
            marker.bindPopup(popupContent, {
                maxWidth: 300,
                className: 'custom-popup'
            });
            
            markers.push(marker);
        });

        const foodIcon = L.divIcon({
            html: '<div style="background: #ea6666; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 10px rgba(244, 162, 97, 0.5);"><i class="fas fa-utensils"></i></div>',
            className: 'custom-marker',
            iconSize: [30, 30]
        });

        eatingPlaces.forEach((place) => {
            const marker2 = L.marker(place.coords, { icon: foodIcon }).addTo(map);
            
            const popupContent = `
                <div class="popup-title">${place.name}</div>
                <div class="popup-description">${place.description}</div>
                <div class="popup-info">${place.info}</div>
            `;

            marker2.bindPopup(popupContent, {
                maxWidth: 300,
                className: 'custom-popup'
            });
            foodMarkers.push(marker2);
        });

        // AÃ±adir efectos visuales
        map.on('zoomend', function() {
            const currentZoom = map.getZoom();
            markers.forEach(marker => {
                const icon = marker.getIcon();
                if (currentZoom > 15) {
                    marker.setIcon(L.divIcon({
                        html: '<div style="background: #667eea; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);"><i class="fas fa-map-marker-alt"></i></div>',
                        className: 'custom-marker',
                        iconSize: [30, 30]
                    }));
                } else {
                    marker.setIcon(L.divIcon({
                        html: '<div style="background: #667eea; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 10px; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);"><i class="fas fa-map-marker-alt"></i></div>',
                        className: 'custom-marker',
                        iconSize: [40, 40]
                    }));
                }
            });
            foodMarkers.forEach(marker2 => {
                const icon2 = marker2.getIcon();
                if (currentZoom > 15) {
                    marker2.setIcon(L.divIcon({
                        html: '<div style="background: #ea6666; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 14px; box-shadow: 0 2px 10px rgba(244, 162, 97, 0.5);"><i class="fas fa-utensils"></i></div>',
                        className: 'custom-marker',
                        iconSize: [30, 30]
                    }));
                } else {
                    marker2.setIcon(L.divIcon({
                        html: '<div style="background: #ea6666; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 10px; box-shadow: 0 2px 8px rgba(244, 162, 97, 0.4);"><i class="fas fa-utensils"></i></div>',
                        className: 'custom-marker',
                        iconSize: [30, 30]
                    }));
                }
            });
        });

        // Inicializar con zoom moderado
        map.setZoom(12);

        // AÃ±adir control de geolocalizaciÃ³n (solo si el usuario lo permite)
        if (navigator.geolocation) {
            const locationButton = L.control({position: 'topright'});
            locationButton.onAdd = function() {
                const div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
                div.innerHTML = '<button style="background: white; border: none; padding: 8px; cursor: pointer; border-radius: 4px; box-shadow: 0 1px 5px rgba(0,0,0,0.65);"><i class="fas fa-location-arrow" style="color: #667eea;"></i></button>';
                div.onclick = function() {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        const userLat = position.coords.latitude;
                        const userLng = position.coords.longitude;
                        
                        // Verificar si estÃ¡ en Londres (aproximadamente)
                        if (userLat > 51.4 && userLat < 51.6 && userLng > -0.3 && userLng < 0.1) {
                            map.setView([userLat, userLng], 15);
                            L.marker([userLat, userLng])
                                .addTo(map)
                                .bindPopup('ğŸ“ Tu ubicaciÃ³n actual')
                                .openPopup();
                        } else {
                            const msg = L.control({position:'topright'});
                            msg.onAdd = () => {
                              const div = L.DomUtil.create('div','leaflet-control leaflet-bar');
                              div.innerHTML = '<div style="background:#fff;padding:8px;border-radius:4px;">No estÃ¡s en Londres</div>';
                              setTimeout(() => msg.remove(), 2500);
                              return div;
                            };
                            msg.addTo(map);
                            map.setView([51.5074, -0.1278], 12);
                        }
                    });
                };
                return div;
            };
            locationButton.addTo(map);
        }
        function focusOnFoodMarker(index) {
            let targetMarker = null;

            // Buscar en marcadores de comida
            if (index < foodMarkers.length) {
                targetMarker = foodMarkers[index];
            }

            if (targetMarker) {
                const latLng = targetMarker.getLatLng();
                map.setView(latLng, 16);
                targetMarker.openPopup();

                // Scroll suave en mÃ³viles
                if (window.innerWidth <= 768) {
                    document.getElementById('map').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
        }
        function focusOnMarker(index) {
            let targetMarker = null;

            // Buscar en marcadores normales
            if (index < markers.length) {
                targetMarker = markers[index];
            }

            if (targetMarker) {
                const latLng = targetMarker.getLatLng();
                map.setView(latLng, 16);
                targetMarker.openPopup();

                // Scroll suave en mÃ³viles
                if (window.innerWidth <= 768) {
                    document.getElementById('map').scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }
            
        }

        document.querySelectorAll('.toggle-xmas').forEach(label => {
          label.addEventListener('click', () => {
            setTimeout(() => {               // esperamos a que cambie el check
              const chk  = label.querySelector('.check');
              const idx  = Number(chk.dataset.index);
              const target = idx < markers.length
                           ? markers[idx - 1]
                           : foodMarkers[idx - 100];
            
              if (target) {
                chk.checked ? map.removeLayer(target)
                            : map.addLayer(target);
              }
            }, 0);
          });
        });

        div.innerHTML = `
        <button style="background:#fff;border:none;padding:10px;font-size:18px;
                       cursor:pointer;border-radius:50%;box-shadow:0 1px 5px rgba(0,0,0,.3);
                       width:44px;height:44px;display:flex;align-items:center;justify-content:center;">
          <i class="fas fa-location-arrow" style="color:#667eea;"></i>
        </button>`;

        console.log('ğŸ—ºï¸ Mapa de Londres cargado con Ã©xito!');
        console.log('ğŸ“ Total de puntos de interÃ©s:', pointsOfInterest.length);
    </script>
</body>
</html>